<?xml version="1.0" encoding="UTF-8"?>
<Context antiResourceLocking="true" path="/GreenLoop">

    <!-- JNDI Resource: MySQL Connection Pool -->
    <Resource name="jdbc/GreenLoopDB"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
              
              driverClassName="com.mysql.cj.jdbc.Driver"
              url="jdbc:mysql://localhost:3306/greenloop?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC"
              username="dbuser"
              password="securepassword"

              maxTotal="100"
              maxIdle="30"
              minIdle="10"
              initialSize="10"
              maxWaitMillis="10000"

              validationQuery="SELECT 1"
              testOnBorrow="true"
              testWhileIdle="true"
              testOnReturn="false"
              timeBetweenEvictionRunsMillis="30000"
              minEvictableIdleTimeMillis="60000"

              removeAbandonedOnBorrow="true"
              removeAbandonedTimeout="60"
              logAbandoned="true"

              connectionProperties="useUnicode=true;characterEncoding=utf8;autoReconnect=true" />

    <!-- Optional JNDI Configuration -->
    <Environment name="maxLoginAttempts" value="5" type="java.lang.Integer" />
    <Environment name="lockoutTimeMinutes" value="15" type="java.lang.Integer" />
</Context>

